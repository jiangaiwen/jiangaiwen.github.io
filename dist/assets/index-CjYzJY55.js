
    /**
     * 由 Fantastic-admin 提供技术支持
     * Powered by Fantastic-admin
     * Gitee  https://fantastic-admin.gitee.io
     * Github https://fantastic-admin.github.io
     */
    
import{I as gt,J as yt,aC as St,s as Mt,r as ke,j as Te,m as He,af as Me,d as It,u as Bt,aD as wt,v as Pt,Z as Wt,ai as Nt,x as Et,o as Ot,y as Oe,z as Rt,n as se,c as de,e as fe,f as Re,g as jt,a3 as _t,a8 as Vt,i as ae,ah as Tt,w as je,A as Ht,B as Ft,F as _e,q as Lt,H as Ve,C as At,D as $t,ae as zt,p as Dt,l as Kt,_ as Yt}from"./index-DGclp6VM.js";import{r as Ut}from"./vue.runtime.esm-bundler-Bm742LTN.js";import{u as Gt}from"./useMainPage-B4T4L3h1.js";var Ie={exports:{}};(function(Z,M){(function(a,e){e(M,Ut)})(gt,function(a,e){let P=null;function A(){return P!==null}function ne(t){P&&z(),P=t}function le(t){t===P&&(P=null)}function z(){P&&(P.closeMenu(),P=null)}const k={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultAdjustPadding:{x:0,y:10}};function W(t,n){let s=t.offsetTop;return t.offsetParent!=null&&t.offsetParent!=n&&(s-=t.offsetParent.scrollTop,s+=W(t.offsetParent,n)),s}function f(t,n){let s=t.offsetLeft;return t.offsetParent!=null&&t.offsetParent!=n&&(s-=t.offsetParent.scrollLeft,s+=f(t.offsetParent,n)),s}function _(t,n,s,h){return{x:f(t,h)+n,y:W(t,h)+s}}const x="mx-menu-default-container",l="mx-menu-container-";let m=0;function u(t){const{getContainer:n,zIndex:s}=t;if(n){const g=typeof n=="function"?n():n;if(g){let I=g.getAttribute("id");return I||(I=l+m++,g.setAttribute("id",I)),{eleId:I,container:g,isNew:!1}}}let h=document.getElementById(x);return h||(h=document.createElement("div"),h.setAttribute("id",x),h.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(h)),h.style.zIndex=(s==null?void 0:s.toString())||k.defaultZindex.toString(),{eleId:x,container:h,isNew:!0}}function p(t){return typeof t=="number"?`${t}px`:t}const v=e.defineComponent({props:{vnode:{type:null},data:{type:null,default:null}},setup(t){const{vnode:n,data:s}=e.toRefs(t);return()=>typeof n.value=="function"?n.value(s.value):n.value}}),S=(t,n)=>{const s=t.__vccOpts||t;for(const[h,g]of n)s[h]=g;return s},q={},oe={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ae=[e.createElementVNode("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1)];function $e(t,n){return e.openBlock(),e.createElementBlock("svg",oe,Ae)}const ze=S(q,[["render",$e]]),De={},Ke={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ye=[e.createElementVNode("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1)];function Ue(t,n){return e.openBlock(),e.createElementBlock("svg",Ke,Ye)}const Be=S(De,[["render",Ue]]),Ge={class:"mx-item-row"},Xe=["xlink:href"],Ze={key:1,class:"label"},qe={class:"mx-item-row"},Je={class:"mx-shortcut"},me=e.defineComponent({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(t,{expose:n,emit:s}){const h=t,g=s,{clickHandler:I,clickClose:r,clickableWhenHasChildren:T,disabled:E,hidden:C,label:o,icon:$,iconFontClass:H,showRightArrow:U,shortcut:V,hasChildren:B}=e.toRefs(h),w=e.ref(!1),b=e.ref(!1),c=e.ref(),y=e.inject("globalOptions"),O=e.inject("globalHasSlot"),d=e.inject("globalRenderSlot"),L=e.inject("globalCloseMenu"),F=e.inject("menuContext"),J={showSubMenu:()=>w.value?(F.markActiveMenuItem(J,!0),!0):B.value?(Q(),!0):!1,isDisabledOrHidden:()=>E.value||C.value,getElement:()=>c.value,focus:()=>b.value=!0,blur:()=>b.value=!1,click:G};e.onMounted(()=>{F.isMenuItemDataCollectedFlag()?e.nextTick(()=>{let N=0;const X=F.getElement();if(X){let ee=0;for(let R=0;R<X.children.length;R++){const te=X.children[R];if(te.getAttribute("data-type")==="ContextMenuItem"){if(te===c.value){N=ee;break}ee++}}}F.addChildMenuItem(J,N)}):F.addChildMenuItem(J)}),e.onBeforeUnmount(()=>{F.removeChildMenuItem(J)});function G(N){if(!E.value){if(N){const X=N.target;if(X.classList.contains("mx-context-no-clickable")||y.value.ignoreClickClassName&&X.classList.contains(y.value.ignoreClickClassName))return;if(y.value.clickCloseClassName&&X.classList.contains(y.value.clickCloseClassName)){N.stopPropagation(),L(h.rawMenuItem);return}}B.value?T.value?(typeof I.value=="function"&&I.value(N),g("click",N)):w.value||Q():(typeof I.value=="function"&&I.value(N),g("click",N),r.value&&L(h.rawMenuItem))}}function Q(N){b.value=!1,F.checkCloseOtherSubMenuTimeOut()||F.closeOtherSubMenu(),E.value||(F.markActiveMenuItem(J),B.value&&(N||F.markThisOpenedByKeyBoard(),F.addOpenedSubMenu(()=>{b.value=!1,w.value=!1,g("subMenuClose")}),w.value=!0,g("subMenuOpen")))}function Y(){return{disabled:E.value,label:o.value,icon:$.value,iconFontClass:H.value,showRightArrow:U.value,clickClose:r.value,clickableWhenHasChildren:T.value,shortcut:V.value,theme:y.value.theme,isOpen:w,hasChildren:B,onClick:G,onMouseEnter:Q,closeMenu:L}}return n({showSubMenu:w,keyBoardFocusMenu:b}),(N,X)=>e.unref(C)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:c,"data-type":"ContextMenuItem"},[e.unref(O)("itemRender")?(e.openBlock(),e.createBlock(e.unref(v),{key:0,vnode:()=>e.unref(d)("itemRender",Y())},null,8,["vnode"])):t.customRender?(e.openBlock(),e.createBlock(e.unref(v),{key:1,vnode:t.customRender,data:Y()},null,8,["vnode","data"])):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["mx-context-menu-item",e.unref(E)?"disabled":"",b.value?"keyboard-focus":"",t.customClass?" "+t.customClass:"",w.value?"open":""]),onClick:G,onMouseenter:Q},[e.renderSlot(N.$slots,"default",{},()=>[e.createElementVNode("div",Ge,[e.createElementVNode("div",{class:e.normalizeClass(["mx-icon-placeholder",t.preserveIconWidth?"preserve-width":""])},[e.renderSlot(N.$slots,"icon",{},()=>[e.unref(O)("itemIconRender")?(e.openBlock(),e.createBlock(e.unref(v),{key:0,vnode:()=>e.unref(d)("itemIconRender",Y())},null,8,["vnode"])):typeof t.svgIcon=="string"&&t.svgIcon?(e.openBlock(),e.createElementBlock("svg",e.mergeProps({key:1,class:"icon svg"},t.svgProps),[e.createElementVNode("use",{"xlink:href":t.svgIcon},null,8,Xe)],16)):typeof e.unref($)!="string"?(e.openBlock(),e.createBlock(e.unref(v),{key:2,vnode:e.unref($),data:e.unref($)},null,8,["vnode","data"])):typeof e.unref($)=="string"&&e.unref($)!==""?(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(e.unref($)+" icon "+e.unref(H)+" "+e.unref(y).iconFontClass)},null,2)):e.createCommentVNode("",!0)]),t.checked?e.renderSlot(N.$slots,"check",{key:0},()=>[e.unref(O)("itemCheckRender")?(e.openBlock(),e.createBlock(e.unref(v),{key:0,vnode:()=>e.unref(d)("itemCheckRender",Y())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(ze)]):e.createCommentVNode("",!0)],2),e.renderSlot(N.$slots,"label",{},()=>[e.unref(O)("itemLabelRender")?(e.openBlock(),e.createBlock(e.unref(v),{key:0,vnode:()=>e.unref(d)("itemLabelRender",Y())},null,8,["vnode"])):typeof e.unref(o)=="string"?(e.openBlock(),e.createElementBlock("span",Ze,e.toDisplayString(e.unref(o)),1)):(e.openBlock(),e.createBlock(e.unref(v),{key:2,vnode:e.unref(o),data:e.unref(o)},null,8,["vnode","data"]))])]),e.createElementVNode("div",qe,[e.unref(V)?e.renderSlot(N.$slots,"shortcut",{key:0},()=>[e.unref(O)("itemShortcutRender")?(e.openBlock(),e.createBlock(e.unref(v),{key:0,vnode:()=>e.unref(d)("itemShortcutRender",Y())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createElementVNode("span",Je,e.toDisplayString(e.unref(V)),1)]):e.createCommentVNode("",!0),e.unref(U)?e.renderSlot(N.$slots,"rightArrow",{key:1},()=>[e.unref(O)("itemRightArrowRender")?(e.openBlock(),e.createBlock(e.unref(v),{key:0,vnode:()=>e.unref(d)("itemRightArrowRender",Y())},null,8,["vnode"])):e.createCommentVNode("",!0),e.createVNode(Be)]):e.createCommentVNode("",!0)])])],34)),e.unref(y).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.normalizeProps(e.mergeProps({key:3},e.unref(y).menuTransitionProps)),{default:e.withCtx(()=>[w.value?e.renderSlot(N.$slots,"submenu",{key:0}):e.createCommentVNode("",!0)]),_:3},16)):w.value?e.renderSlot(N.$slots,"submenu",{key:4}):e.createCommentVNode("",!0)],512))}}),Qe=e.defineComponent({name:"ContextMenuSperator",components:{VNodeRender:v},setup(){const t=e.inject("globalHasSlot"),n=e.inject("globalRenderSlot");return{globalHasSlot:t,globalRenderSlot:n}}}),et={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function tt(t,n,s,h,g,I){const r=e.resolveComponent("VNodeRender");return t.globalHasSlot("separatorRender")?(e.openBlock(),e.createBlock(r,{key:0,vnode:()=>t.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(e.openBlock(),e.createElementBlock("div",et))}const he=S(Qe,[["render",tt]]),nt=e.defineComponent({name:"ContextSubMenu",components:{ContextMenuItem:me,ContextMenuSeparator:he,ContextMenuIconRight:Be},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup(t){const n=e.inject("menuContext"),s=e.inject("globalOptions"),h=e.inject("globalHasSlot"),g=e.inject("globalRenderSlot"),{zIndex:I,getParentWidth:r,getParentHeight:T}=n,{adjustPosition:E}=e.toRefs(t),C=e.ref(),o=e.ref(),$=e.ref(),H=[],U=e.inject("globalSetCurrentSubMenu"),V=[];let B=null,w=0;function b(){B&&B.blur()}function c(i,j){if(i){for(let D=j!==void 0?j:0;D<V.length;D++)if(!V[D].isDisabledOrHidden()){y(D);break}}else for(let D=j!==void 0?j:V.length-1;D>=0;D--)if(!V[D].isDisabledOrHidden()){y(D);break}}function y(i){if(B&&b(),i!==void 0&&(B=V[Math.max(0,Math.min(i,V.length-1))]),!!B&&(B.focus(),ee.value)){const j=B.getElement();j&&(G.value=Math.min(Math.max(-Q.value,-j.offsetTop-j.offsetHeight+te.value),0))}}function O(){U(d)}const d={isTopLevel:()=>n.getParentContext()===null,closeSelfAndActiveParent:()=>{const i=J.getParentContext();if(i){i.closeOtherSubMenu();const j=i.getSubMenuInstanceContext();if(j)return j.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var i;return(i=J.getParentContext())==null?void 0:i.closeOtherSubMenu()},moveCurrentItemFirst:()=>c(!0),moveCurrentItemLast:()=>c(!1),moveCurrentItemDown:()=>c(!0,B?V.indexOf(B)+1:0),moveCurrentItemUp:()=>c(!1,B?V.indexOf(B)-1:0),focusCurrentItem:()=>y(),openCurrentItemSubMenu:()=>B?B==null?void 0:B.showSubMenu():!1,triggerCurrentItemClick:i=>B==null?void 0:B.click(i)};let L=!1,F=!1;const J={zIndex:I+1,container:n.container,adjustPadding:s.value.adjustPadding||k.defaultAdjustPadding,getParentWidth:()=>{var i;return((i=C.value)==null?void 0:i.offsetWidth)||0},getParentHeight:()=>{var i;return((i=C.value)==null?void 0:i.offsetHeight)||0},getParentX:()=>R.value.x,getParentY:()=>R.value.y,getParentAbsX:()=>C.value?f(C.value,n.container):0,getParentAbsY:()=>C.value?W(C.value,n.container):0,getPositon:()=>[0,0],addOpenedSubMenu(i){H.push(i)},closeOtherSubMenu(){H.forEach(i=>i()),H.splice(0,H.length),U(d)},checkCloseOtherSubMenuTimeOut(){return w?(clearTimeout(w),w=0,!0):!1},closeOtherSubMenuWithTimeOut(){w=setTimeout(()=>{w=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(i,j)=>{j===void 0?V.push(i):V.splice(j,0,i)},removeChildMenuItem:i=>{V.splice(V.indexOf(i),1)},markActiveMenuItem:(i,j=!1)=>{b(),B=i,j&&y()},markThisOpenedByKeyBoard:()=>{L=!0},isOpenedByKeyBoardFlag:()=>L?(L=!1,!0):!1,isMenuItemDataCollectedFlag:()=>F,getElement:()=>C.value||null,getParentContext:()=>n,getSubMenuInstanceContext:()=>d};e.provide("menuContext",J);const G=e.ref(0),Q=e.ref(0);function Y(i){i?G.value=Math.min(Math.max(G.value-50,-Q.value),0):G.value=Math.min(G.value+50,0)}function N(i){i.preventDefault(),i.stopPropagation(),Y(i.deltaY>0)}function X(i){s.value.mouseScroll&&(i.preventDefault(),i.stopPropagation(),Y(i.deltaY>0))}const ee=e.ref(!1),R=e.ref({x:0,y:0}),te=e.ref(0);return e.onMounted(()=>{const i=n.getPositon();R.value={x:i[0]??s.value.xOffset??0,y:i[1]??s.value.yOffset??0},U(d),e.nextTick(()=>{var j,D;const K=C.value;if(K&&o.value){const{container:ie}=n,xe=(r==null?void 0:r())??0,pt=(T==null?void 0:T())??0,pe=typeof n.adjustPadding=="number"?n.adjustPadding:((j=n.adjustPadding)==null?void 0:j.x)??0,be=typeof n.adjustPadding=="number"?n.adjustPadding:((D=n.adjustPadding)==null?void 0:D.y)??0,re=pt>0?be:0,bt=document.documentElement.scrollHeight,kt=document.documentElement.scrollWidth,Ct=Math.min(kt,ie.offsetWidth),ge=Math.min(bt,ie.offsetHeight);let ye=f(K,ie),Se=W(K,ie);t.direction.includes("l")?R.value.x-=K.offsetWidth+pe:t.direction.includes("r")?R.value.x+=xe+pe:(R.value.x+=xe/2,R.value.x-=(K.offsetWidth+pe)/2),t.direction.includes("t")?R.value.y-=K.offsetHeight+be*2:t.direction.includes("b")?R.value.y-=be:R.value.y-=(K.offsetHeight+be)/2,E.value&&e.nextTick(()=>{ye=f(K,ie),Se=W(K,ie);const xt=ye+K.offsetWidth-Ct,Ee=Se+K.offsetHeight+re*2-ge;if(ee.value=Ee>0,Q.value=K.offsetHeight-ge+re*2,xt>0){const ue=xe+K.offsetWidth-pe,ce=ye;ue>ce?R.value.x-=ce:R.value.x-=ue}if(ee.value){const ue=Ee,ce=Se;ue>ce?R.value.y-=ce-re:R.value.y-=ue-re,te.value=ge-re*2}else te.value=0})}K==null||K.focus({preventScroll:!0}),n.isOpenedByKeyBoardFlag()&&c(!0),F=!0})}),{menu:C,scroll:o,options:s,zIndex:I,constOptions:k,scrollValue:G,upScrollButton:$,overflow:ee,position:R,scrollHeight:Q,maxHeight:te,globalHasSlot:h,globalRenderSlot:g,onScroll:Y,onSubMenuBodyClick:O,onMouseWhell:X,onMouseWhellMx:N,solveNumberOrStringSize:p}}}),ot={key:0,class:"mx-context-menu-updown placeholder"},lt={key:1,class:"mx-context-menu-updown placeholder"},at={class:"mx-context-menu-scroll",ref:"scroll"};function it(t,n,s,h,g,I){const r=e.resolveComponent("ContextMenuSeparator"),T=e.resolveComponent("ContextSubMenu",!0),E=e.resolveComponent("ContextMenuItem"),C=e.resolveComponent("ContextMenuIconRight");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["mx-context-menu",t.options.customClass?t.options.customClass:"",t.options.theme??""]),style:e.normalizeStyle({maxWidth:t.maxWidth?t.solveNumberOrStringSize(t.maxWidth):`${t.constOptions.defaultMaxWidth}px`,minWidth:t.minWidth?t.solveNumberOrStringSize(t.minWidth):`${t.constOptions.defaultMinWidth}px`,maxHeight:t.overflow&&t.maxHeight>0?`${t.maxHeight}px`:void 0,zIndex:t.zIndex,left:`${t.position.x}px`,top:`${t.position.y}px`}),"data-type":"ContextSubMenu",onClick:n[4]||(n[4]=(...o)=>t.onSubMenuBodyClick&&t.onSubMenuBodyClick(...o)),onWheel:n[5]||(n[5]=(...o)=>t.onMouseWhell&&t.onMouseWhell(...o))},[e.createElementVNode("div",{class:e.normalizeClass(["mx-context-menu-items"]),ref:"menu",style:e.normalizeStyle({top:`${t.scrollValue}px`})},[e.renderSlot(t.$slots,"default",{},()=>[t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",ot)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.items,(o,$)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:$},[o.hidden!==!0&&o.divided==="up"?(e.openBlock(),e.createBlock(r,{key:0})):e.createCommentVNode("",!0),o.hidden!==!0&&o.divided==="self"?(e.openBlock(),e.createBlock(r,{key:1})):(e.openBlock(),e.createBlock(E,{key:2,clickHandler:o.onClick?H=>o.onClick(H):void 0,disabled:o.disabled,hidden:o.hidden,icon:o.icon,iconFontClass:o.iconFontClass,svgIcon:o.svgIcon,svgProps:o.svgProps,label:o.label,customRender:o.customRender,customClass:o.customClass,checked:o.checked,shortcut:o.shortcut,clickClose:o.clickClose,clickableWhenHasChildren:o.clickableWhenHasChildren,preserveIconWidth:o.preserveIconWidth!==void 0?o.preserveIconWidth:t.options.preserveIconWidth,showRightArrow:o.children&&o.children.length>0,hasChildren:o.children&&o.children.length>0,rawMenuItem:o,onSubMenuOpen:o.onSubMenuOpen,onSubMenuClose:o.onSubMenuClose},e.createSlots({_:2},[o.children&&o.children.length>0?{name:"submenu",fn:e.withCtx(()=>[e.createVNode(T,{items:o.children,maxWidth:o.maxWidth,minWidth:o.minWidth,adjustPosition:o.adjustSubMenuPosition!==void 0?o.adjustSubMenuPosition:t.options.adjustPosition,direction:o.direction!==void 0?o.direction:t.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),o.hidden!==!0&&(o.divided==="down"||o.divided===!0)?(e.openBlock(),e.createBlock(r,{key:3})):e.createCommentVNode("",!0)],64))),128)),t.overflow&&t.options.updownButtonSpaceholder?(e.openBlock(),e.createElementBlock("div",lt)):e.createCommentVNode("",!0)])],4),e.createElementVNode("div",at,[e.withDirectives(e.createElementVNode("div",{ref:"upScrollButton",class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable up"+(t.overflow&&t.scrollValue<0?"":" disabled")),onClick:n[0]||(n[0]=o=>t.onScroll(!1)),onWheel:n[1]||(n[1]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(C)],34),[[e.vShow,t.overflow]]),e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass("mx-context-menu-updown mx-context-no-clickable down"+(t.overflow&&t.scrollValue>-t.scrollHeight?"":" disabled")),onClick:n[2]||(n[2]=o=>t.onScroll(!0)),onWheel:n[3]||(n[3]=(...o)=>t.onMouseWhellMx&&t.onMouseWhellMx(...o))},[e.createVNode(C)],34),[[e.vShow,t.overflow]])],512)],38)}const ve=S(nt,[["render",it]]),st={class:"mx-menu-ghost-host"},we=e.defineComponent({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Object,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(t,{expose:n,emit:s}){const h=t,g=s,I=e.useSlots(),{options:r,show:T,container:E}=e.toRefs(h);e.onMounted(()=>{T.value&&$()}),e.onBeforeUnmount(()=>{B()}),e.watch(T,d=>{d?$():B()});const C={closeMenu:H,isClosed:U};let o=!1;function $(){V(),ne(C)}function H(d){o=!0,g("close",d),r.value.menuTransitionProps||g("closeAnimFinished"),le(C)}function U(){return o}function V(){setTimeout(()=>{document.addEventListener("click",y,!0),document.addEventListener("contextmenu",y,!0),document.addEventListener("scroll",c,!0),!h.isFullScreenContainer&&E.value&&E.value.addEventListener("scroll",c,!0),r.value.keyboardControl!==!1&&document.addEventListener("keydown",b)},50)}function B(){document.removeEventListener("contextmenu",y,!0),document.removeEventListener("click",y,!0),document.removeEventListener("scroll",c,!0),!h.isFullScreenContainer&&E.value&&E.value.removeEventListener("scroll",c,!0),r.value.keyboardControl!==!1&&document.removeEventListener("keydown",b)}const w=e.ref();e.provide("globalSetCurrentSubMenu",d=>w.value=d);function b(d){var L,F,J,G,Q,Y,N,X,ee,R,te,i,j;let D=!0;switch(d.key){case"Escape":{((L=w.value)==null?void 0:L.isTopLevel())===!1?(F=w.value)==null||F.closeCurrentSubMenu():H();break}case"ArrowDown":(J=w.value)==null||J.moveCurrentItemDown();break;case"ArrowUp":(G=w.value)==null||G.moveCurrentItemUp();break;case"Home":(Q=w.value)==null||Q.moveCurrentItemFirst();break;case"End":(Y=w.value)==null||Y.moveCurrentItemLast();break;case"ArrowLeft":{(N=w.value)!=null&&N.closeSelfAndActiveParent()||(ee=(X=r.value).onKeyFocusMoveLeft)==null||ee.call(X);break}case"ArrowRight":(R=w.value)!=null&&R.openCurrentItemSubMenu()||(i=(te=r.value).onKeyFocusMoveRight)==null||i.call(te);break;case"Enter":(j=w.value)==null||j.triggerCurrentItemClick(d);break;default:D=!1;break}D&&w.value&&(d.stopPropagation(),d.preventDefault())}function c(){r.value.closeWhenScroll!==!1&&H()}function y(d){O(d.target)}function O(d){for(;d;){if(d.classList&&d.classList.contains("mx-menu-host"))return;d=d.parentNode}r.value.clickCloseOnOutside!==!1&&(B(),H())}return e.provide("globalOptions",r),e.provide("globalCloseMenu",H),e.provide("globalIsFullScreenContainer",h.isFullScreenContainer),e.provide("globalHasSlot",d=>I[d]!==void 0),e.provide("globalRenderSlot",(d,L)=>e.renderSlot(I,d,{...L},()=>[e.h("span","Render slot failed")],!1)),e.provide("menuContext",{zIndex:r.value.zIndex||k.defaultZindex,container:E.value,adjustPadding:{x:0,y:0},getParentAbsY:()=>r.value.x,getParentAbsX:()=>r.value.y,getParentX:()=>0,getParentY:()=>0,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[r.value.x,r.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(C),(d,L)=>(e.openBlock(),e.createElementBlock("div",st,[e.unref(r).menuTransitionProps?(e.openBlock(),e.createBlock(e.Transition,e.mergeProps({key:0,appear:""},e.unref(r).menuTransitionProps,{onAfterLeave:L[0]||(L[0]=F=>g("closeAnimFinished"))}),{default:e.withCtx(()=>[e.unref(T)?(e.openBlock(),e.createBlock(ve,{key:0,class:"mx-menu-host",items:e.unref(r).items,adjustPosition:e.unref(r).adjustPosition,maxWidth:e.unref(r).maxWidth||e.unref(k).defaultMaxWidth,minWidth:e.unref(r).minWidth||e.unref(k).defaultMinWidth,direction:e.unref(r).direction||e.unref(k).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(d.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]),_:3},16)):e.unref(T)?(e.openBlock(),e.createBlock(ve,{key:1,class:"mx-menu-host",items:e.unref(r).items,adjustPosition:e.unref(r).adjustPosition,maxWidth:e.unref(r).maxWidth||e.unref(k).defaultMaxWidth,minWidth:e.unref(r).minWidth||e.unref(k).defaultMinWidth,direction:e.unref(r).direction||e.unref(k).defaultDirection},{default:e.withCtx(()=>[e.renderSlot(d.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","direction"])):e.createCommentVNode("",!0)]))}}),Pe=e.defineComponent({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup(t,n){const{options:s,show:h}=e.toRefs(t);return n.expose({closeMenu:()=>n.emit("update:show",!1),isClosed:()=>!h.value}),()=>{const{isNew:g,container:I,eleId:r}=u(s.value);return[e.h(e.Teleport,{to:`#${r}`},[e.h(we,{options:s,show:h,container:I,isFullScreenContainer:!g,onClose:T=>{var E,C;n.emit("update:show",!1),n.emit("close"),(C=(E=s.value).onClose)==null||C.call(E,T)}},n.slots)])]}}}),We=e.defineComponent({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(t,n){const s=e.inject("globalOptions"),{adjustSubMenuPosition:h,maxWidth:g,minWidth:I}=e.toRefs(t),r=typeof h.value<"u"?h.value:s.value.adjustPosition;return()=>e.h(me,{...t,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0},n.slots.default?{submenu:()=>e.h(ve,{maxWidth:g.value,minWidth:I.value,adjustPosition:r},{default:n.slots.default})}:void 0)}});function rt(t,n,s,h){const g=e.ref(!0),I=e.h(we,{options:t,show:g,container:n,isFullScreenContainer:!s,onCloseAnimFinished:()=>{e.render(null,n)},onClose:r=>{var T;(T=t.onClose)==null||T.call(t,r),g.value=!1}},h);return e.render(I,n),I.component}function Ne(t,n){const s=u(t);return rt(t,s.container,s.isNew,n).exposed}const Ce={install(t){t.config.globalProperties.$contextmenu=Ne,t.component("ContextMenu",Pe),t.component("ContextMenuItem",me),t.component("ContextMenuGroup",We),t.component("ContextMenuSperator",he),t.component("ContextMenuSeparator",he),t.component("ContextSubMenu",ve)},showContextMenu(t,n){return Ne(t,n)},isAnyContextMenuOpen(){return A()},closeContextMenu:z,transformMenuPosition:_},ut={},ct={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},dt=[e.createElementVNode("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),e.createElementVNode("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),e.createElementVNode("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1)];function ft(t,n){return e.openBlock(),e.createElementBlock("svg",ct,dt)}const mt=S(ut,[["render",ft]]),ht=["onClick","onMouseenter"],vt=e.defineComponent({__name:"MenuBar",props:{options:{type:Object,default:null}},setup(t){const n=t,s=e.ref(),h=e.ref(!1),g=e.ref([]),I=e.ref(null);function r(){h.value=!0}function T(){h.value=!1}e.onMounted(()=>{g.value=n.options.items||[]}),e.watch(()=>n.options,()=>{g.value=n.options.items||[]});let E=null,C=-1;function o(){C<g.value.length-1?C++:C=0,U(C,g.value[C])}function $(){C>0?C--:C=g.value.length-1,U(C,g.value[C])}function H(b){const c=n.options.barPopDirection??"bl";let y=0,O=0;return c.startsWith("b")?O=W(b)+b.offsetHeight:c.startsWith("t")?O=W(b):O=W(b)+b.offsetHeight/2,c.endsWith("l")?y=f(b):c.startsWith("r")?y=f(b)+b.offsetWidth:y=f(b)+b.offsetWidth/2,{x:y,y:O}}function U(b,c){var y;if(C=b,!c.children)return;E&&(E.closeMenu(),E=null,h.value=!0),I.value=c;const O=(y=s.value)==null?void 0:y.children[b];if(O){const{x:d,y:L}=H(O);E=Ce.showContextMenu({...n.options,items:c.children,x:d,y:L,onKeyFocusMoveLeft(){$()},onKeyFocusMoveRight(){o()},onClose(){I.value==c&&(h.value=!1,I.value=null)}})}}function V(){C=0;const b=s.value;if(b){const{x:c,y}=H(b);E=Ce.showContextMenu({...n.options,x:c,y})}}function B(b,c){c?(h.value=!0,U(b,c),c.onClick&&(c.clickableWhenHasChildren===!0&&c.children&&c.children.length>0||!c.children||c.children.length===0)&&c.onClick()):V()}function w(b,c){h.value&&U(b,c)}return(b,c)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["mx-menu-bar",t.options.theme??"",t.options.mini?"mini":""]),onFocus:r,onBlur:T},[e.renderSlot(b.$slots,"prefix"),t.options.mini?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"menuBarContent",ref:s,class:"mx-menu-bar-content"},[e.createElementVNode("div",{class:"mx-menu-bar-item",onClick:c[0]||(c[0]=y=>B(0,null))},[e.createVNode(mt)])],512)):(e.openBlock(),e.createElementBlock("div",{key:1,ref_key:"menuBarContent",ref:s,class:"mx-menu-bar-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,(y,O)=>(e.openBlock(),e.createElementBlock("div",{key:O,class:e.normalizeClass(["mx-menu-bar-item",y==I.value?"active":""]),onClick:d=>B(O,y),onMouseenter:d=>w(O,y)},e.toDisplayString(y.label),43,ht))),128))],512)),e.renderSlot(b.$slots,"suffix")],34))}});a.ContextMenu=Pe,a.ContextMenuGroup=We,a.ContextMenuItem=me,a.ContextMenuSeparator=he,a.MenuBar=vt,a.default=Ce,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})})(Ie,Ie.exports);var Xt=Ie.exports;const Zt=yt(Xt),qt=St("tabbar",()=>{const Z=Mt(),M=ke([]),a=ke(-1);async function e(k){var x,l,m;const W=[];k.matched.forEach((u,p)=>{var v;p>0&&(v=u.components)!=null&&v.default.name&&W.push(u.components.default.name)});const f=(x=k.matched.at(-1))==null?void 0:x.meta,_=k.fullPath;if(k.name!=="reload"&&!M.value.find(p=>p.routeName?p.routeName===k.name:p.tabId===_)){const p={tabId:_,fullPath:k.fullPath,routeName:k.name,title:typeof(f==null?void 0:f.title)=="function"?f.title():f==null?void 0:f.title,icon:(f==null?void 0:f.icon)??((m=(l=f==null?void 0:f.breadcrumbNeste)==null?void 0:l.findLast(v=>v.icon))==null?void 0:m.icon),name:W};a.value>=0?(M.value.splice(a.value+1,0,p),a.value=-1):M.value.push(p)}}function P(k){const W=[],f=[];M.value.forEach(x=>{x.tabId===k?f.push(...x.name):W.push(...x.name)});const _=[];f.forEach(x=>{W.includes(x)||_.push(x)}),Z.remove(_),M.value=M.value.filter(x=>x.tabId!==k)}function A(k){const W=[],f=[];M.value.forEach(x=>{x.tabId!==k?f.push(...x.name):W.push(...x.name)});const _=[];f.forEach(x=>{W.includes(x)||_.push(x)}),Z.remove(_),M.value=M.value.filter(x=>x.tabId===k)}function ne(k){const W=M.value.findIndex(l=>l.tabId===k),f=[],_=[];M.value.forEach((l,m)=>{m<W?_.push(...l.name):f.push(...l.name)});const x=[];_.forEach(l=>{f.includes(l)||x.push(l)}),Z.remove(x),M.value=M.value.filter((l,m)=>m>=W)}function le(k){const W=M.value.findIndex(l=>l.tabId===k),f=[],_=[];M.value.forEach((l,m)=>{m>W?_.push(...l.name):f.push(...l.name)});const x=[];_.forEach(l=>{f.includes(l)||x.push(l)}),Z.remove(x),M.value=M.value.filter((l,m)=>m<=W)}function z(){M.value=[]}return{list:M,leaveIndex:a,add:e,remove:P,removeOtherSide:A,removeLeftSide:ne,removeRightSide:le,clean:z}}),Fe=qt;function Jt(){const Z=Te(),M=He(),a=Fe();function e(){return Z.fullPath}function P(l){const m=a.list.findIndex(u=>u.tabId===e());a.$patch({leaveIndex:m}),M.push(l)}function A(l){const m=e();M.go(l),a.remove(m)}function ne(l){const m=e();M.push(l).then(()=>{a.remove(m)})}function le(l=e()){const m=e();if(a.list.some(u=>u.tabId===l))if(a.list.length>1)if(l===m){const u=a.list.findIndex(p=>p.tabId===l);u<a.list.length-1?ne(a.list[u+1].fullPath):ne(a.list[u-1].fullPath)}else a.remove(l);else Me({type:"error",message:"当前只有一个标签页，已阻止关闭"});else Me({type:"error",message:"关闭的页面不存在"})}function z(l=e()){const m=e();if(l!==m){const u=a.list.findIndex(p=>p.tabId===l);M.push(a.list[u].fullPath)}a.removeOtherSide(l)}function k(l=e()){const m=e();if(l!==m){const u=a.list.findIndex(v=>v.tabId===l);a.list.findIndex(v=>v.tabId===m)<u&&M.push(a.list[u].fullPath)}a.removeLeftSide(l)}function W(l=e()){const m=e();if(l!==m){const u=a.list.findIndex(v=>v.tabId===l);a.list.findIndex(v=>v.tabId===m)>u&&M.push(a.list[u].fullPath)}a.removeRightSide(l)}function f(l=e()){return a.list.some(m=>m.tabId!==l)}function _(l=e()){var u;let m=!0;if(l===((u=a.list[0])==null?void 0:u.tabId))m=!1;else{const p=a.list.findIndex(v=>v.tabId===l);m=a.list.some((v,S)=>S<p&&v.tabId!==l)}return m}function x(l=e()){var u;let m=!0;if(l===((u=a.list.at(-1))==null?void 0:u.tabId))m=!1;else{const p=a.list.findIndex(v=>v.tabId===l);m=a.list.some((v,S)=>S>=p&&v.tabId!==l)}return m}return{getId:e,open:P,go:A,close:ne,closeById:le,closeOtherSide:z,closeLeftSide:k,closeRightSide:W,checkCloseOtherSide:f,checkCloseLeftSide:_,checkCloseRightSide:x}}const Le=Z=>(Dt("data-v-ff6c6f75"),Z=Z(),Kt(),Z),Qt={class:"tabbar-container"},en=["data-index","title","onClick","onContextmenu"],tn=Le(()=>fe("div",{class:"tab-dividers"},null,-1)),nn=Le(()=>fe("div",{class:"tab-background"},null,-1)),on={class:"tab-content"},ln={key:0,class:"action-icon"},an=It({name:"Tabbar",__name:"index",setup(Z){const M=Te(),a=He(),e=Bt(),P=Fe(),A=Jt(),ne=Gt(),le=wt({reactive:!0}),z=Pt(()=>A.getId()),k=ke(),W=ke(),f=Wt([]);Nt(()=>{f.value=[]}),Et(()=>M,u=>{e.settings.tabbar.enable&&P.add(u).then(()=>{const p=P.list.findIndex(v=>v.tabId===z.value);p!==-1&&(l(f.value[p].offsetLeft),_())})},{immediate:!0,deep:!0});function _(){W.value.$el.clientWidth>k.value.clientWidth&&localStorage.getItem("tabbarScrollTip")===void 0&&(localStorage.setItem("tabbarScrollTip",""),Me({showClose:!0,message:"标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览",type:"info"}))}function x(u){(u.deltaY||u.detail!==0)&&k.value.scrollBy({left:(u.deltaY||u.detail)>0?50:-50})}function l(u){k.value.scrollTo({left:u-50,behavior:"smooth"})}function m(u,p){u.preventDefault(),Zt.showContextMenu({x:u.x,y:u.y,zIndex:1050,iconFontClass:"",customClass:"tabbar-contextmenu",items:[{label:"重新加载",icon:"i-ri:refresh-line",disabled:p.tabId!==z.value,onClick:()=>ne.reload()},{label:"关闭标签页",icon:"i-ri:close-line",disabled:P.list.length<=1,divided:!0,onClick:()=>{A.closeById(p.tabId)}},{label:"关闭其他标签页",disabled:!A.checkCloseOtherSide(p.tabId),onClick:()=>{A.closeOtherSide(p.tabId)}},{label:"关闭左侧标签页",disabled:!A.checkCloseLeftSide(p.tabId),onClick:()=>{A.closeLeftSide(p.tabId)}},{label:"关闭右侧标签页",disabled:!A.checkCloseRightSide(p.tabId),onClick:()=>{A.closeRightSide(p.tabId)}}]})}return Ot(()=>{Oe("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0",(u,p)=>{var v,S;if(e.settings.tabbar.enable&&e.settings.tabbar.enableHotkeys)switch(u.preventDefault(),p.key){case"alt+left":if(P.list[0].tabId!==z.value){const q=P.list.findIndex(oe=>oe.tabId===z.value);a.push(P.list[q-1].fullPath)}break;case"alt+right":if(((v=P.list.at(-1))==null?void 0:v.tabId)!==z.value){const q=P.list.findIndex(oe=>oe.tabId===z.value);a.push(P.list[q+1].fullPath)}break;case"alt+w":A.closeById(z.value);break;case"alt+1":case"alt+2":case"alt+3":case"alt+4":case"alt+5":case"alt+6":case"alt+7":case"alt+8":case"alt+9":{const q=Number(p.key.split("+")[1]);(S=P.list[q-1])!=null&&S.fullPath&&a.push(P.list[q-1].fullPath);break}case"alt+0":a.push(P.list[P.list.length-1].fullPath);break}})}),Rt(()=>{Oe.unbind("alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0")}),(u,p)=>{const v=zt;return se(),de("div",Qt,[fe("div",{ref_key:"tabsRef",ref:k,class:"tabs",onWheel:je(x,["prevent"])},[Re(Tt,{ref_key:"tabContainerRef",ref:W,name:"tabbar",tag:"div",class:"tab-container"},{default:jt(()=>[(se(!0),de(_t,null,Vt(ae(P).list,(S,q)=>(se(),de("div",{key:S.tabId,ref_for:!0,ref_key:"tabRef",ref:f,"data-index":q,class:Ht(["tab",{actived:S.tabId===ae(z)}]),title:typeof(S==null?void 0:S.title)=="function"?S.title():S.title,onClick:oe=>ae(a).push(S.fullPath),onContextmenu:oe=>m(oe,S)},[tn,nn,fe("div",on,[(se(),de("div",{key:S.tabId,class:"title"},[ae(e).settings.tabbar.enableIcon&&S.icon?(se(),Ft(v,{key:0,name:S.icon,class:"icon"},null,8,["name"])):_e("",!0),Lt(" "+Ve(typeof(S==null?void 0:S.title)=="function"?S.title():S.title),1)])),ae(P).list.length>1?(se(),de("div",ln,[Re(v,{name:"i-ri:close-fill",onClick:je(oe=>ae(A).closeById(S.tabId),["stop"])},null,8,["onClick"])])):_e("",!0),At(fe("div",{class:"hotkey-number"},Ve(q+1),513),[[$t,ae(le).alt&&q<9]])])],42,en))),128))]),_:1},512)],544)])}}}),cn=Yt(an,[["__scopeId","data-v-ff6c6f75"]]);export{cn as default};
