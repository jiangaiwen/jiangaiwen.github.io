
    /**
     * 由 Fantastic-admin 提供技术支持
     * Powered by Fantastic-admin
     * Gitee  https://fantastic-admin.gitee.io
     * Github https://fantastic-admin.github.io
     */
    
import{_ as P}from"./sub.vue_vue_type_script_setup_true_lang-BUaVPArp.js";import{r as S,_ as w}from"./item.vue_vue_type_script_setup_true_lang-CEM8PZz0.js";import{d as E,r as f,v as I,x as y,a2 as b,M as z,n as i,c as p,a3 as k,a8 as J,A as q,i as M,R as A,B as C,F as $}from"./index-C-3tFKuV.js";const R=E({name:"MainMenu",__name:"index",props:{menu:{},value:{},accordion:{type:Boolean,default:!0},defaultOpeneds:{default:()=>[]},mode:{default:"vertical"},collapse:{type:Boolean,default:!1},showCollapseName:{type:Boolean,default:!1}},setup(O){const n=O,s=f(n.value),c=f({}),t=f({}),o=f(n.defaultOpeneds.slice(0)),B=f([]),v=I(()=>n.mode==="horizontal"||n.mode==="vertical"&&n.collapse);function _(e,l=[]){e.forEach(a=>{const u=a.path??JSON.stringify(a);if(a.children){const r=[...l,u];t.value[u]={index:u,indexPath:r,active:!1},_(a.children,r)}else c.value[u]={index:u,indexPath:l}})}const h=(e,l)=>{o.value.includes(e)||(n.accordion&&(o.value=o.value.filter(a=>l.includes(a))),o.value.push(e))},d=e=>{if(Array.isArray(e)){A(()=>{d(e.at(-1)),e.length>1&&d(e.slice(0,-1))});return}Object.keys(t.value).forEach(l=>{t.value[l].indexPath.includes(e)&&(o.value=o.value.filter(a=>a!==e))})};function x(e){var l,a;for(const u in t.value)t.value[u].active=!1;(l=t.value[e])==null||l.indexPath.forEach(u=>{t.value[u].active=!0}),(a=c.value[e])==null||a.indexPath.forEach(u=>{t.value[u].active=!0})}const g=e=>{(n.mode==="horizontal"||n.collapse)&&(o.value=[]),x(e)},N=(e,l)=>{o.value.includes(e)?d(e):h(e,l)};function m(){const e=s.value&&c.value[s.value];x(s.value),!(!e||n.collapse)&&e.indexPath.forEach(l=>{const a=t.value[l];a&&h(l,a.indexPath)})}return y(()=>n.menu,e=>{_(e),m()},{deep:!0,immediate:!0}),y(()=>n.value,e=>{c.value[e]||(s.value="");const l=c.value[e]||s.value&&c.value[s.value]||c.value[n.value];l?s.value=l.index:s.value=e,m()}),y(()=>n.collapse,e=>{e&&(o.value=[]),m()}),b(S,z({props:n,items:c,subMenus:t,activeIndex:s,openedMenus:o,mouseInMenu:B,isMenuPopup:v,openMenu:h,closeMenu:d,handleMenuItemClick:g,handleSubMenuClick:N})),(e,l)=>(i(),p("div",{class:q(["flex flex-col of-hidden transition-all",{"w-[200px]":!M(v)&&n.mode==="vertical","w-[64px]":M(v)&&n.mode==="vertical","h-[80px]":n.mode==="horizontal","flex-row! w-auto":M(v)&&n.mode==="horizontal"}])},[(i(!0),p(k,null,J(e.menu,a=>{var u,r;return i(),p(k,{key:a.path??JSON.stringify(a)},[((u=a.meta)==null?void 0:u.menu)!==!1?(i(),p(k,{key:0},[(r=a.children)!=null&&r.length?(i(),C(P,{key:0,menu:a,"unique-key":[a.path??JSON.stringify(a)]},null,8,["menu","unique-key"])):(i(),C(w,{key:1,item:a,"unique-key":[a.path??JSON.stringify(a)],onClick:j=>g(a.path??JSON.stringify(a))},null,8,["item","unique-key","onClick"]))],64)):$("",!0)],64)}),128))],2))}});export{R as _};
